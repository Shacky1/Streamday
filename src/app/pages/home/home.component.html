<div class="home-container">
  <h2 class="home-title">Popular Movies & TV Shows</h2>

  <form (submit)="searchMovies(); $event.preventDefault()" class="search-form" role="search">
    <input
      type="text"
      [(ngModel)]="query"
      name="query"
      placeholder="Search movies or TV..."
      class="search-input"
      autocomplete="off"
      aria-label="Search movies"
    />

    <select [(ngModel)]="selectedGenre" name="genre" class="genre-select" (change)="getMoviesByGenre()">
      <option value="">All Genres</option>
      <option *ngFor="let genre of genres" [value]="genre.id">{{ genre.name }}</option>
    </select>

    <button type="submit" class="search-button">
      <i class="bi bi-search"></i> Search
    </button>
  </form>

  <div *ngIf="movies.length === 0 && query.trim() !== ''" class="no-results">
    No results found for "{{ query }}"
  </div>

  <div class="movie-grid" *ngIf="movies.length > 0">
    <div *ngFor="let movie of movies" class="movie-card">
      <img
        [src]="imageUrl(movie.poster_path)"
        alt="{{ movie.title || movie.name }}"
        class="movie-poster"
        loading="lazy"
      />
      <div class="movie-info">
        <h3 class="movie-title">{{ movie.title || movie.name }}</h3>
        <p class="movie-date">
          {{ movie.release_date || movie.first_air_date | date: 'mediumDate' }}
        </p>
        <p *ngIf="movie?.overview" class="movie-overview">
          {{ movie.overview }}
        </p>
        <p class="movie-rating">
          <i class="bi bi-star-fill" style="color: #ffcc00;"></i>
          {{ movie.vote_average ? (movie.vote_average | number: '1.1-1') : 'N/A' }} / 10
        </p>
        <a
          [routerLink]="['/', movie.media_type || 'movie', movie.id]"
          class="watch-button"
        >
          <i class="bi bi-play-fill"></i> Watch Now
        </a>
      </div>
    </div>
  </div>
</div>
